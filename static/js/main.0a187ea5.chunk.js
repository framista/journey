(this.webpackJsonpjourneys=this.webpackJsonpjourneys||[]).push([[0],{125:function(e,t,a){e.exports=a(166)},166:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(51),l=a.n(o),c=(a(79),a(130),a(17)),i=a(3),s=a(8),m=a(123),u=function(e){return e<10?"0"+e:e},d=new Intl.RelativeTimeFormat("en-us",{numeric:"auto"}),p=[{amount:60,name:"seconds"},{amount:60,name:"minutes"},{amount:24,name:"hours"},{amount:7,name:"days"},{amount:4.34524,name:"weeks"},{amount:12,name:"months"},{amount:Number.POSITIVE_INFINITY,name:"years"}];var y=function(e){var t=e.journey,a=e.deleteJourney,n=e.setDeleteModal,o=e.setBlockClicking,l=t.location,c=t.startDate,i=t.id,s=function(e){e.stopPropagation(),n(!1),o(!1)};return r.a.createElement("div",null,r.a.createElement("div",{className:"background"}),r.a.createElement("div",{className:"delete-modal"},r.a.createElement("div",{className:"delete-modal__title"},r.a.createElement("h5",null,"Are you sure to delete this journey?")),r.a.createElement("div",{className:"delete-modal__body"},r.a.createElement("p",null,"If you want to delete journey in ",r.a.createElement("span",null,l),", which started at ",r.a.createElement("span",null,function(e){var t=e.day,a=e.month,n=e.year;return"".concat(u(t),".").concat(u(a),".").concat(n)}(c))," press YES.")),r.a.createElement("div",{className:"delete-modal__footer"},r.a.createElement("button",{className:"delete-modal__button delete-modal__button--yes",onClick:function(e){return function(e,t){s(e),a(t)}(e,i)}},"YES"),r.a.createElement("button",{className:"delete-modal__button delete-modal__button--no",onClick:function(e){return s(e)}},"NO"))))},E=a(122);var j=function(e){var t=e.journey,a=e.setBlockClicking,n=e.setDetail,o=t.id,i=t.location,s=t.startDate,m=t.description,u=t.travellingCompanion,d=t.imageFile;return l.a.createPortal(r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"background"}),r.a.createElement("div",{className:"journey-detail"},r.a.createElement("div",{className:"journey-detail__title"},r.a.createElement("h5",null,i)),r.a.createElement("div",{className:"journey-detail__body"},r.a.createElement("div",{className:"journey-detail__image"},d?r.a.createElement("img",{src:d,alt:"journey-img"}):r.a.createElement("img",{src:"https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80",alt:"journey-img"})),r.a.createElement("p",{className:"journey-detail__location"},"Your journey in\xa0",r.a.createElement("span",null,i)," started at\xa0",r.a.createElement("span",null,s.day,".",s.month,".",s.year),"."),u.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"journey-detail__travelling"},"You spent your vacation with:"),r.a.createElement("ul",{className:"journey-detail__list"},u.map((function(e,t){return r.a.createElement("li",{key:t,className:"journey-detail__list--item"},e.trim())})))),m&&r.a.createElement("p",{className:"journey-detail__description"},m)),r.a.createElement("div",{className:"journey-detail__footer"},r.a.createElement(c.b,{to:"/edit/".concat(o),className:"journey-detail__button journey-detail__button--edit"},"edit"),r.a.createElement("button",{className:"journey-detail__button journey-detail__button--cancel",onClick:function(e){e.stopPropagation(),n(!1),a(!1)}},"close")))),document.getElementById("portal"))};var g=function(e){var t=e.journey,a=e.deleteJourney,o=e.setBlockClicking,l=t.location,c=t.startDate,i=t.imageFile,u=Object(n.useState)(!1),g=Object(s.a)(u,2),_=g[0],v=g[1],f=Object(n.useState)(!1),b=Object(s.a)(f,2),h=b[0],N=b[1];return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"journey",onClick:function(){N(!0)}},i?r.a.createElement("img",{className:"journey__img",src:i,alt:""}):r.a.createElement(E.a,{name:l.split(" ")[0],size:60,round:"50%"}),r.a.createElement("div",{className:"journey__description"},r.a.createElement("h3",{className:"journey__h3"},l),r.a.createElement("p",{className:"journey__p"},function(e){for(var t=(e-new Date)/1e3,a=0;a<=p.length;a++){var n=p[a];if(Math.abs(t)<n.amount)return d.format(Math.round(t),n.name);t/=n.amount}}(new Date(c.year,c.month-1,c.day,12)))),r.a.createElement(m.a,{className:"journey__icon",onClick:function(e){return function(e){e.stopPropagation(),v(!0),o(!0)}(e)}}),_&&r.a.createElement(y,{journey:t,deleteJourney:a,setDeleteModal:v,setBlockClicking:o})),h&&r.a.createElement(j,{journey:t,setDetail:N,setBlockClicking:o}))};var _=function(){return r.a.createElement("div",{className:"no-journey"},r.a.createElement("h2",{className:"no-journey__h2"},"You don't have any journeys"),r.a.createElement(c.b,{to:"/create",className:"no-journey__btn"},"Add journey"))};var v=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("journeys"))||[]),t=Object(s.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(!1),i=Object(s.a)(l,2),m=i[0],u=i[1],d=function(e){var t=a.filter((function(t){return t.id!==e}));o(t)};return r.a.createElement("main",{className:"container"},r.a.createElement("section",{className:"center-container",style:{pointerEvents:m?"none":"auto"}},a.length?r.a.createElement("div",{className:"journey-container"},a.map((function(e){return r.a.createElement(g,{journey:e,key:e.id,deleteJourney:d,setBlockClicking:u})}))):r.a.createElement(_,null),r.a.createElement(c.b,{className:"new-journey__btn--create",to:"/create"},"+")))};var f=Object(i.f)((function(e){return r.a.createElement("main",{className:"container"},r.a.createElement("section",{className:"no-page"},r.a.createElement("div",{className:"no-page__info"},r.a.createElement("h2",{className:"no-page__title"},"Oops, page not found"),r.a.createElement("p",{className:"no-page__description"},"We are very sorry for the inconvenience. It looks like you're trying to access a page that has been deleted or never even existed."),r.a.createElement("button",{className:"no-page__btn",onClick:function(){return e.history.push("/")}},"Back to homepage")),r.a.createElement("div",{className:"no-page__picture"},r.a.createElement("img",{src:"https://images.unsplash.com/photo-1549747862-084be795471b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80",alt:"desert-island"}),r.a.createElement("p",{className:"no-page__error"},"404"))))})),b=a(168),h=a(1),N=a.n(h);N.a.ModalError={title:N.a.string.isRequired,description:N.a.string.isRequired,onCloseModal:N.a.func.isRequired};var O=function(e){var t=e.title,a=e.description,n=e.onCloseModal;return r.a.createElement("div",{className:"modal-error"},r.a.createElement("div",{className:"modal-error__icon"},"!"),r.a.createElement("h3",{className:"modal-error__title"},t),r.a.createElement("p",{className:"modal-error__description"},a),r.a.createElement("button",{className:"modal-error__button",onClick:n},"OK"))},w=a(124),k=a(2),C=function(e){return/^(\s|\d)/.test(e)?"The location should start with a letter":e.length<3||e.length>60?"The location should contain min 3 and max 60 characters":""},D=function(e){var t=e.day,a=e.month,n=e.year,r=[31,28,31,30,31,30,31,31,30,31,30,31];return(n%400===0||n%100!==0&&n%4===0)&&(r[1]=29),t>r[a-1]?"Not correct date":new Date(n,a-1,t)>new Date?"Date shouldn't be from future":""},S=function(e){return e.length>300?"The description should contain max 300 characters":""};var F=function(e){var t=Object(n.useState)(e.journey),a=Object(s.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)({location:"",startDate:"",description:"",travellingCompanion:"",imageFile:""}),m=Object(s.a)(i,2),u=m[0],d=m[1],p=Object(n.useState)(""),y=Object(s.a)(p,2),E=y[0],j=y[1],g=Object(n.useState)(""),_=Object(s.a)(g,2),v=_[0],f=_[1],b=Object(n.useState)(!1),h=Object(s.a)(b,2),N=h[0],F=h[1],I=new Array(31).fill(0).map((function(e,t){return t+1})),x=new Array(12).fill(0).map((function(e,t){return t+1})),J=new Array(51).fill((new Date).getFullYear()).map((function(e,t){return e-t})),B=function(e,t){var a=o.startDate;a[t]=e,l(Object(k.a)(Object(k.a)({},o),{},{startDate:a}));var n=D(a);d(Object(k.a)(Object(k.a)({},u),{},{startDate:n}))},M=function(t){t.preventDefault(),T()?F(!0):(F(!1),e.submitJourney(o))},T=function(){var e=o.location,t=o.startDate,a=o.description,n=C(e),r=S(a),l=D(t),c=Object(k.a)(Object(k.a)({},u),{},{location:n,startDate:l,description:r});return d(c),function(e){for(var t in e)if(e[t])return!0;return!1}(c)};return r.a.createElement("div",null,r.a.createElement("form",{className:"new-journey__form",onSubmit:M},r.a.createElement("h2",{className:"new-journey__title"},e.submitButton),r.a.createElement("div",{className:"new-journey__group"},r.a.createElement("label",null,"Location"),r.a.createElement("input",{type:"text",onChange:function(e){var t=e.target.value;l(Object(k.a)(Object(k.a)({},o),{},{location:t}));var a=C(t);d(Object(k.a)(Object(k.a)({},u),{},{location:a}))},value:o.location}),u.location&&r.a.createElement("p",{className:"new-journey__error"},u.location)),r.a.createElement("div",{className:"new-journey__group"},r.a.createElement("label",null,"Start date"),r.a.createElement("div",{className:"new-journey__date"},r.a.createElement("div",{className:"new-journey__select"},"Day",r.a.createElement("select",{onChange:function(e){return B(e.target.value,"day")},value:o.startDate.day},I.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"new-journey__select"},"Month",r.a.createElement("select",{onChange:function(e){return B(e.target.value,"month")},value:o.startDate.month},x.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"new-journey__select"},"Year",r.a.createElement("select",{onChange:function(e){return B(e.target.value,"year")},value:o.startDate.year},J.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),u.startDate&&r.a.createElement("p",{className:"new-journey__error"},u.startDate)),r.a.createElement("div",{className:"new-journey__group"},r.a.createElement("label",null,"Description"),r.a.createElement("textarea",{onChange:function(e){var t=e.target.value;l(Object(k.a)(Object(k.a)({},o),{},{description:t}));var a=S(t);d(Object(k.a)(Object(k.a)({},u),{},{description:a}))},value:o.description,rows:3}),u.description&&r.a.createElement("p",{className:"new-journey__error"},u.description)),r.a.createElement("div",{className:"new-journey__group"},r.a.createElement("label",null,"Travelling companion"),r.a.createElement("div",{className:"new-journey__companion"},o.travellingCompanion.length>0?o.travellingCompanion.map((function(e,t){return r.a.createElement("div",{className:"new-journey__chip",key:t},e,r.a.createElement("div",{className:"new-journey__chip--delete",onClick:function(){return function(e){var t=o.travellingCompanion.filter((function(t,a){return a!==e}));l(Object(k.a)(Object(k.a)({},o),{},{travellingCompanion:t}))}(t)}},"\xd7"))})):r.a.createElement("p",{className:"new-journey__add-companion"},"Insert below the name of travelling companion and press 'Enter'")),r.a.createElement("input",{type:"text",onKeyPress:function(e){if("Enter"===e.key){e.preventDefault();var t=function(e,t){return t>15?"You have too many travelling companions":e.length<3?"The travelling companion should contain at least 3 characters":e.length>15?"The travelling companion should contain max 15 characters":""}(E,o.travellingCompanion.length);if(!t){var a=[].concat(Object(w.a)(o.travellingCompanion),[E]);l(Object(k.a)(Object(k.a)({},o),{},{travellingCompanion:a})),j("")}d(Object(k.a)(Object(k.a)({},u),{},{travellingCompanion:t}))}},value:E,onChange:function(e){return j(e.target.value)}}),u.travellingCompanion&&r.a.createElement("p",{className:"new-journey__error"},u.travellingCompanion)),r.a.createElement("div",{className:"new-journey__group"},r.a.createElement("label",null,"Image"),r.a.createElement("input",{type:"file",id:"file-image",onChange:function(e){return function(e){var t,a=e.target.value,n=Math.round(e.target.files[0].size/1024),r=(t=n,/(\.jpg|\.jpeg|\.png)$/i.test(a)?t>1e3?"Too big image":"":"Not correct type of image file");if(d(Object(k.a)(Object(k.a)({},u),{},{imageFile:r})),!r){var c=new FileReader;c.addEventListener("load",(function(){l(Object(k.a)(Object(k.a)({},o),{},{imageFile:c.result})),f(a.split(/(\\|\/)/g).pop())})),c.readAsDataURL(e.target.files[0])}}(e)}}),r.a.createElement("div",{className:"new-journey__image-info"},r.a.createElement("label",{htmlFor:"file-image",className:"new-journey__label--image"},"Choose image"),v&&r.a.createElement("p",{className:"new-journey__image-name"},"Selected file",r.a.createElement("span",null," ",v))),u.imageFile&&r.a.createElement("p",{className:"new-journey__error"},u.imageFile)),r.a.createElement("div",{className:"new-journey__buttons"},r.a.createElement(c.b,{className:"new-journey__button new-journey__button--back",to:"/"},"back to homepage"),r.a.createElement("button",{className:"new-journey__button new-journey__button--add",onClick:M},e.submitButton))),N&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"background"}),r.a.createElement(O,{title:"Oops!",description:"Your form is not correctly filled. Please improve the form and try again.",onCloseModal:function(){F(!1)}})))};var I=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),o=a[0],l=a[1],c={id:Object(b.a)(),location:"",startDate:{day:1,month:1,year:(new Date).getFullYear()},description:"",travellingCompanion:[],imageFile:""};return r.a.createElement("main",{className:"container"},r.a.createElement("section",{className:"new-journey"},r.a.createElement("img",{className:"new-journey__img",src:"https://images.unsplash.com/photo-1553512313-64af79fdfe9c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=400&q=80",alt:"new-journey"}),r.a.createElement(F,{submitButton:"add journey",journey:c,submitJourney:function(t){var a=JSON.parse(localStorage.getItem("journeys"))||[];a.unshift(t);try{localStorage.setItem("journeys",JSON.stringify(a)),e.history.push("/")}catch(n){l(!0)}}}),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"background"}),r.a.createElement(O,{title:"Oops!",description:"There is no space to save this journey \ud83d\ude32",onCloseModal:function(){return l(!1)}}))))};var x=function(e){var t=e.match.params.id,a=Object(n.useState)(!1),o=Object(s.a)(a,2),l=o[0],c=o[1],i=JSON.parse(localStorage.getItem("journeys")),m=i.findIndex((function(e){return e.id===t}));if(-1===m)return r.a.createElement(f,null);var u=i[m],d=u.imageFile?u.imageFile:"https://images.unsplash.com/photo-1597776089810-2550e6d1e689?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=638&q=80";return r.a.createElement("main",{className:"container"},r.a.createElement("section",{className:"new-journey"},r.a.createElement("div",{className:"edit-journey__img"},r.a.createElement("img",{src:d,alt:"edit-journey"})),r.a.createElement(F,{submitButton:"update journey",journey:u,submitJourney:function(a){var n=JSON.parse(localStorage.getItem("journeys"))||[],r=n.findIndex((function(e){return e.id===t}));if(-1===r)n.unshift(a);else{var o=Object(k.a)(Object(k.a)({},n[r]),a);n.splice(r,1,o)}try{localStorage.setItem("journeys",JSON.stringify(n)),e.history.push("/")}catch(l){c(!0)}}}),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"background"}),r.a.createElement(O,{title:"Oops!",description:"There is no space to save this journey \ud83d\ude32",onCloseModal:function(){return c(!1)}}))))},J=function(){return r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",component:v,exact:!0}),r.a.createElement(i.a,{path:"/create",component:I}),r.a.createElement(i.a,{path:"/edit/:id",component:x}),r.a.createElement(i.a,{component:f}))))};var B=function(){return r.a.createElement(J,null)};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root"))},79:function(e,t,a){}},[[125,1,2]]]);
//# sourceMappingURL=main.0a187ea5.chunk.js.map