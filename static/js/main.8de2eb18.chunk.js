(this.webpackJsonpjourneys=this.webpackJsonpjourneys||[]).push([[0],{128:function(e,t,a){e.exports=a(169)},169:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(52),l=a.n(o),c=(a(81),a(133),a(18)),i=a(4),s=a(54),m=a(9),u=a(124),d=function(e){return e<10?"0"+e:e},p=new Intl.RelativeTimeFormat("en-us",{numeric:"auto"}),g=[{amount:60,name:"seconds"},{amount:60,name:"minutes"},{amount:24,name:"hours"},{amount:7,name:"days"},{amount:4.34524,name:"weeks"},{amount:12,name:"months"},{amount:Number.POSITIVE_INFINITY,name:"years"}];var y=function(e){var t=e.journey,a=e.deleteJourney,n=e.setDeleteModal,o=e.setBlockClicking,l=t.location,c=t.startDate,i=t.id,s=function(e){e.stopPropagation(),n(!1),o(!1)};return r.a.createElement("div",null,r.a.createElement("div",{className:"background"}),r.a.createElement("div",{className:"delete-modal"},r.a.createElement("div",{className:"delete-modal__title"},r.a.createElement("h5",null,"Are you sure to delete this journey?")),r.a.createElement("div",{className:"delete-modal__body"},r.a.createElement("p",null,"If you want to delete journey in ",r.a.createElement("span",null,l),", which started at ",r.a.createElement("span",null,function(e){var t=e.day,a=e.month,n=e.year;return"".concat(d(t),".").concat(d(a),".").concat(n)}(c))," press YES.")),r.a.createElement("div",{className:"delete-modal__footer"},r.a.createElement("button",{className:"delete-modal__button delete-modal__button--yes",onClick:function(e){return function(e,t){s(e),a(t)}(e,i)}},"YES"),r.a.createElement("button",{className:"delete-modal__button delete-modal__button--no",onClick:function(e){return s(e)}},"NO"))))},E=a(126);var j=function(e){var t=e.journey,a=e.setBlockClicking,n=e.setDetail,o=t.id,i=t.location,s=t.startDate,m=t.description,u=t.travellingCompanion,d=t.imageFile;return l.a.createPortal(r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"background"}),r.a.createElement("div",{className:"journey-detail"},r.a.createElement("div",{className:"journey-detail__title"},r.a.createElement("h5",null,i)),r.a.createElement("div",{className:"journey-detail__body"},r.a.createElement("div",{className:"journey-detail__image"},d?r.a.createElement("img",{src:d,alt:"journey-img"}):r.a.createElement("img",{src:"https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80",alt:"journey-img"})),r.a.createElement("p",{className:"journey-detail__location"},"Your journey in\xa0",r.a.createElement("span",null,i)," started at\xa0",r.a.createElement("span",null,s.day,".",s.month,".",s.year),"."),u.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"journey-detail__travelling"},"You spent your vacation with:"),r.a.createElement("ul",{className:"journey-detail__list"},u.map((function(e,t){return r.a.createElement("li",{key:t,className:"journey-detail__list--item"},e.trim())})))),m&&r.a.createElement("p",{className:"journey-detail__description"},m)),r.a.createElement("div",{className:"journey-detail__footer"},r.a.createElement(c.b,{to:"/edit/".concat(o),className:"journey-detail__button journey-detail__button--edit"},"edit"),r.a.createElement("button",{className:"journey-detail__button journey-detail__button--cancel",onClick:function(e){e.stopPropagation(),n(!1),a(!1)}},"close")))),document.getElementById("portal"))};var v=function(e){var t=e.journey,a=e.deleteJourney,o=e.setBlockClicking,l=t.location,c=t.startDate,i=t.imageFile,s=Object(n.useState)(!1),d=Object(m.a)(s,2),v=d[0],f=d[1],_=Object(n.useState)(!1),b=Object(m.a)(_,2),h=b[0],N=b[1];return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"journey",onClick:function(){N(!0)}},i?r.a.createElement("img",{className:"journey__img",src:i,alt:""}):r.a.createElement(E.a,{name:l.split(" ")[0],size:60,round:"50%"}),r.a.createElement("div",{className:"journey__description"},r.a.createElement("h3",{className:"journey__h3"},l),r.a.createElement("p",{className:"journey__p"},function(e){for(var t=(e-new Date)/1e3,a=0;a<=g.length;a++){var n=g[a];if(Math.abs(t)<n.amount)return p.format(Math.round(t),n.name);t/=n.amount}}(new Date(c.year,c.month-1,c.day,12)))),r.a.createElement(u.a,{className:"journey__icon",onClick:function(e){return function(e){e.stopPropagation(),f(!0),o(!0)}(e)}}),v&&r.a.createElement(y,{journey:t,deleteJourney:a,setDeleteModal:f,setBlockClicking:o})),h&&r.a.createElement(j,{journey:t,setDetail:N,setBlockClicking:o}))};var f=function(){return r.a.createElement("div",{className:"no-journey"},r.a.createElement("h2",{className:"no-journey__h2"},"You don't have any journeys"),r.a.createElement(c.b,{to:"/create",className:"no-journey__btn"},"Add journey"))},_=a(125);var b=function(e){var t=e.sort,a=e.searchText,n=e.setSearchText;return r.a.createElement("div",{className:"search-form"},r.a.createElement("input",{className:"search-form__input",type:"text",placeholder:"Search...",value:a,onChange:function(e){return n(e.target.value)}}),r.a.createElement("button",{className:"search-form__button--sort",onClick:t},r.a.createElement(_.a,null)))};var h=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("journeys"))||[]),t=Object(m.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(a),i=Object(m.a)(l,2),u=i[0],d=i[1],p=Object(n.useState)(!1),g=Object(m.a)(p,2),y=g[0],E=g[1],j=Object(n.useState)(""),_=Object(m.a)(j,2),h=_[0],N=_[1];Object(n.useEffect)((function(){d(a)}),[a]);var O=function(e){var t=a.filter((function(t){return t.id!==e}));o(t),N("")};return r.a.createElement("main",{className:"container"},r.a.createElement("section",{className:"center-container",style:{pointerEvents:y?"none":"auto"}},r.a.createElement(b,{sort:function(){d((function(e){return e.slice().sort((function(e,t){var a=new Date(e.startDate.year,e.startDate.month-1,parseInt(e.startDate.day,10));return new Date(t.startDate.year,t.startDate.month-1,parseInt(t.startDate.day,10)).getTime()-a.getTime()}))}))},searchText:h,setSearchText:function(e){var t=a.filter((function(t){t.id,t.imageFile;var a=Object(s.a)(t,["id","imageFile"]);return function e(t,a){return"string"===typeof a?a.toLowerCase().includes(t):Object.values(a).some((function(a){return e(t,a)}))}(e.toLowerCase(),a)}));d(t),N(e)}}),a.length?u.length?r.a.createElement("div",{className:"journey-container"},u.map((function(e){return r.a.createElement(v,{journey:e,key:e.id,deleteJourney:O,setBlockClicking:E})}))):r.a.createElement("h2",{className:"no-journey-toshow"},"There is nothing to show"):r.a.createElement(f,null),r.a.createElement(c.b,{className:"new-journey__btn--create",to:"/create"},"+")))};var N=Object(i.f)((function(e){return r.a.createElement("main",{className:"container"},r.a.createElement("section",{className:"no-page"},r.a.createElement("div",{className:"no-page__info"},r.a.createElement("h2",{className:"no-page__title"},"Oops, page not found"),r.a.createElement("p",{className:"no-page__description"},"We are very sorry for the inconvenience. It looks like you're trying to access a page that has been deleted or never even existed."),r.a.createElement("button",{className:"no-page__btn",onClick:function(){return e.history.push("/")}},"Back to homepage")),r.a.createElement("div",{className:"no-page__picture"},r.a.createElement("img",{src:"https://images.unsplash.com/photo-1549747862-084be795471b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80",alt:"desert-island"}),r.a.createElement("p",{className:"no-page__error"},"404"))))})),O=a(171),w=a(2),C=a.n(w);C.a.ModalError={title:C.a.string.isRequired,description:C.a.string.isRequired,onCloseModal:C.a.func.isRequired};var D=function(e){var t=e.title,a=e.description,n=e.onCloseModal;return r.a.createElement("div",{className:"modal-error"},r.a.createElement("div",{className:"modal-error__icon"},"!"),r.a.createElement("h3",{className:"modal-error__title"},t),r.a.createElement("p",{className:"modal-error__description"},a),r.a.createElement("button",{className:"modal-error__button",onClick:n},"OK"))},k=a(127),S=a(3),F=function(e){return/^(\s|\d)/.test(e)?"The location should start with a letter":e.length<3||e.length>60?"The location should contain min 3 and max 60 characters":""},x=function(e){var t=e.day,a=e.month,n=e.year,r=[31,28,31,30,31,30,31,31,30,31,30,31];return(n%400===0||n%100!==0&&n%4===0)&&(r[1]=29),t>r[a-1]?"Not correct date":new Date(n,a-1,t)>new Date?"Date shouldn't be from future":""},I=function(e){return e.length>300?"The description should contain max 300 characters":""},T=function(e,t){return t>15?"You cannot add more travelling companions":e.length<3?"The travelling companion should contain at least 3 characters":e.length>15?"The travelling companion should contain max 15 characters":""};var J=function(e){var t=Object(n.useState)(e.journey),a=Object(m.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)({location:"",startDate:"",description:"",travellingCompanion:"",imageFile:""}),u=Object(m.a)(i,2),d=u[0],p=u[1],g=Object(n.useState)(""),y=Object(m.a)(g,2),E=y[0],j=y[1],v=Object(n.useState)(""),f=Object(m.a)(v,2),_=f[0],b=f[1],h=Object(n.useState)(!1),N=Object(m.a)(h,2),O=N[0],w=N[1],C=new Array(31).fill(0).map((function(e,t){return t+1})),J=new Array(12).fill(0).map((function(e,t){return t+1})),M=new Array(51).fill((new Date).getFullYear()).map((function(e,t){return e-t})),B=function(e,t){var a=o.startDate;a[t]=e,l(Object(S.a)(Object(S.a)({},o),{},{startDate:a}));var n=x(a);p(Object(S.a)(Object(S.a)({},d),{},{startDate:n}))},Y=function(t){t.preventDefault(),q()?w(!0):(w(!1),e.submitJourney(o))},q=function(){var e=o.location,t=o.startDate,a=o.description,n=F(e),r=I(a),l=x(t),c=Object(S.a)(Object(S.a)({},d),{},{location:n,startDate:l,description:r});p(c);c.travellingCompanion;return function(e){for(var t in e)if(e[t])return!0;return!1}(Object(s.a)(c,["travellingCompanion"]))};return r.a.createElement("div",null,r.a.createElement("form",{className:"new-journey__form",onSubmit:Y},r.a.createElement("h2",{className:"new-journey__title"},e.submitButton),r.a.createElement("div",{className:"new-journey__group"},r.a.createElement("label",null,"Location"),r.a.createElement("input",{type:"text",onChange:function(e){var t=e.target.value;l(Object(S.a)(Object(S.a)({},o),{},{location:t}));var a=F(t);p(Object(S.a)(Object(S.a)({},d),{},{location:a}))},value:o.location}),d.location&&r.a.createElement("p",{className:"new-journey__error"},d.location)),r.a.createElement("div",{className:"new-journey__group"},r.a.createElement("label",null,"Start date"),r.a.createElement("div",{className:"new-journey__date"},r.a.createElement("div",{className:"new-journey__select"},"Day",r.a.createElement("select",{onChange:function(e){return B(e.target.value,"day")},value:o.startDate.day},C.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"new-journey__select"},"Month",r.a.createElement("select",{onChange:function(e){return B(e.target.value,"month")},value:o.startDate.month},J.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"new-journey__select"},"Year",r.a.createElement("select",{onChange:function(e){return B(e.target.value,"year")},value:o.startDate.year},M.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),d.startDate&&r.a.createElement("p",{className:"new-journey__error"},d.startDate)),r.a.createElement("div",{className:"new-journey__group"},r.a.createElement("label",null,"Description"),r.a.createElement("textarea",{onChange:function(e){var t=e.target.value;l(Object(S.a)(Object(S.a)({},o),{},{description:t}));var a=I(t);p(Object(S.a)(Object(S.a)({},d),{},{description:a}))},value:o.description,rows:3}),d.description&&r.a.createElement("p",{className:"new-journey__error"},d.description)),r.a.createElement("div",{className:"new-journey__group"},r.a.createElement("label",null,"Travelling companion"),r.a.createElement("div",{className:"new-journey__companion"},o.travellingCompanion.length>0?o.travellingCompanion.map((function(e,t){return r.a.createElement("div",{className:"new-journey__chip",key:t},e,r.a.createElement("div",{className:"new-journey__chip--delete",onClick:function(){return function(e){var t=o.travellingCompanion.filter((function(t,a){return a!==e})),a=T("correct",t.length);p(Object(S.a)(Object(S.a)({},d),{},{travellingCompanion:a})),l(Object(S.a)(Object(S.a)({},o),{},{travellingCompanion:t}))}(t)}},"\xd7"))})):r.a.createElement("p",{className:"new-journey__add-companion"},"Insert below the name of travelling companion and press 'Enter'")),r.a.createElement("input",{type:"text",onKeyPress:function(e){if("Enter"===e.key){e.preventDefault(),console.log(E),console.log(E.length);var t=T(E,o.travellingCompanion.length+1);if(!t){var a=[].concat(Object(k.a)(o.travellingCompanion),[E]);l(Object(S.a)(Object(S.a)({},o),{},{travellingCompanion:a})),j("")}p(Object(S.a)(Object(S.a)({},d),{},{travellingCompanion:t}))}},value:E,onChange:function(e){var t=e.target.value,a=T(t,o.travellingCompanion.length);j(t),p(Object(S.a)(Object(S.a)({},d),{},{travellingCompanion:a}))}}),d.travellingCompanion&&r.a.createElement("p",{className:"new-journey__error"},d.travellingCompanion)),r.a.createElement("div",{className:"new-journey__group"},r.a.createElement("label",null,"Image"),r.a.createElement("input",{type:"file",id:"file-image",onChange:function(e){var t,a=e.target.value,n=Math.round(e.target.files[0].size/1024),r=(t=n,/(\.jpg|\.jpeg|\.png)$/i.test(a)?t>1e3?"Too big image":"":"Not correct type of image file");if(p(Object(S.a)(Object(S.a)({},d),{},{imageFile:r})),!r){var c=new FileReader;c.addEventListener("load",(function(){l(Object(S.a)(Object(S.a)({},o),{},{imageFile:c.result})),b(a.split(/(\\|\/)/g).pop())})),c.readAsDataURL(e.target.files[0])}}}),r.a.createElement("div",{className:"new-journey__image-info"},r.a.createElement("label",{htmlFor:"file-image",className:"new-journey__label--image"},"Choose image"),_&&r.a.createElement("p",{className:"new-journey__image-name"},"Selected file",r.a.createElement("span",null," ",_))),d.imageFile&&r.a.createElement("p",{className:"new-journey__error"},d.imageFile)),r.a.createElement("div",{className:"new-journey__buttons"},r.a.createElement(c.b,{className:"new-journey__button new-journey__button--back",to:"/"},"back to homepage"),r.a.createElement("button",{className:"new-journey__button new-journey__button--add",onClick:Y},e.submitButton))),O&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"background"}),r.a.createElement(D,{title:"Oops!",description:"Your form is not correctly filled. Please improve the form and try again.",onCloseModal:function(){w(!1)}})))};var M=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),o=a[0],l=a[1],c=new Date,i={id:Object(O.a)(),location:"",startDate:{day:c.getDate(),month:c.getMonth()+1,year:c.getFullYear()},description:"",travellingCompanion:[],imageFile:""};return r.a.createElement("main",{className:"container"},r.a.createElement("section",{className:"new-journey"},r.a.createElement("img",{className:"new-journey__img",src:"https://images.unsplash.com/photo-1553512313-64af79fdfe9c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=400&q=80",alt:"new-journey"}),r.a.createElement(J,{submitButton:"add journey",journey:i,submitJourney:function(t){var a=JSON.parse(localStorage.getItem("journeys"))||[];a.unshift(t);try{localStorage.setItem("journeys",JSON.stringify(a)),e.history.push("/")}catch(n){l(!0)}}}),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"background"}),r.a.createElement(D,{title:"Oops!",description:"There is no space to save this journey \ud83d\ude32",onCloseModal:function(){return l(!1)}}))))};var B=function(e){var t=e.match.params.id,a=Object(n.useState)(!1),o=Object(m.a)(a,2),l=o[0],c=o[1],i=JSON.parse(localStorage.getItem("journeys")),s=i.findIndex((function(e){return e.id===t}));if(-1===s)return r.a.createElement(N,null);var u=i[s],d=u.imageFile?u.imageFile:"https://images.unsplash.com/photo-1597776089810-2550e6d1e689?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=638&q=80";return r.a.createElement("main",{className:"container"},r.a.createElement("section",{className:"new-journey"},r.a.createElement("div",{className:"edit-journey__img"},r.a.createElement("img",{src:d,alt:"edit-journey"})),r.a.createElement(J,{submitButton:"update journey",journey:u,submitJourney:function(a){var n=JSON.parse(localStorage.getItem("journeys"))||[],r=n.findIndex((function(e){return e.id===t}));if(-1===r)n.unshift(a);else{var o=Object(S.a)(Object(S.a)({},n[r]),a);n.splice(r,1,o)}try{localStorage.setItem("journeys",JSON.stringify(n)),e.history.push("/")}catch(l){c(!0)}}}),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"background"}),r.a.createElement(D,{title:"Oops!",description:"There is no space to save this journey \ud83d\ude32",onCloseModal:function(){return c(!1)}}))))},Y=function(){return r.a.createElement(c.a,null,r.a.createElement("div",null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",component:h,exact:!0}),r.a.createElement(i.a,{path:"/create",component:M}),r.a.createElement(i.a,{path:"/edit/:id",component:B}),r.a.createElement(i.a,{component:N}))))};var q=function(){return r.a.createElement(Y,null)};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root"))},81:function(e,t,a){}},[[128,1,2]]]);
//# sourceMappingURL=main.8de2eb18.chunk.js.map